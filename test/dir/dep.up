# I am a depedency for main.up


obj MyObj

# Constructor
cdef MyObj MyObj.new(int v)
# Destructor
cdef nil MyObj.del()

%{
    #include <stdio.h>
    #include <stdlib.h>

    // Keep in mind that this object is a pointer
    typedef struct
    {
        int val;
    } *MyObj;

    // Constructor
    MyObj MyObj_new(int val)
    {
        MyObj obj = malloc(sizeof(MyObj));
        
        obj->val = val;

        return obj;
    }

    // Destructor
    void MyObj_del(MyObj obj)
    {
        free(obj);
    }

    // Test
//    int main()
//    {
//        MyObj obj = MyObj_new(42);
//
//        printf("%d\n", obj->val);
//
//        MyObj_del(obj);
//    }
%}
